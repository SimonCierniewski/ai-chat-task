# =======================================
# API Service Environment Variables
# =======================================
# Copy to .env.local and fill with actual values
# NEVER commit .env.local to version control

# =======================================
# Server Configuration
# =======================================
NODE_ENV=development
PORT=3000
# EU Region: Railway deployment in Frankfurt/Amsterdam
API_BASE_URL=http://localhost:3000

# =======================================
# OpenAI Configuration
# =======================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_DEFAULT_MODEL=gpt-4o-mini
# Optional: Set organization if using org-scoped key
# OPENAI_ORG_ID=org-xxxxxxxxxxxxxxxxxxxx

# OpenAI Provider Configuration (Phase 5)
OPENAI_CONNECT_TIMEOUT_MS=5000    # Connection timeout (default: 5s)
OPENAI_TIMEOUT_MS=30000           # Overall request timeout (default: 30s)
OPENAI_RETRY_MAX=1                # Max retries on 5xx/network errors (default: 1)
OPENAI_SSE_HEARTBEAT_MS=30000     # SSE heartbeat interval (default: 30s)

# =======================================
# Zep Memory Service Configuration (PHASE 3)
# =======================================
# ⚠️ SERVER-ONLY: Never expose ZEP_API_KEY to client applications
# Get from: https://app.getzep.com/ or https://cloud.getzep.com/
# Note: Zep is currently US-region only (expect +100-150ms latency from EU)
ZEP_API_KEY=z_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx  # CRITICAL: Keep server-side only
ZEP_BASE_URL=https://api.getzep.com/v3            # v3 API endpoint
# Optional: Custom deployment URL if self-hosted in EU (future)
# ZEP_BASE_URL=https://zep-eu.yourdomain.com/v3
# Optional: Timeout for Zep API calls (ms) - increase for transatlantic latency
# ZEP_TIMEOUT_MS=3000

# =======================================
# Supabase Configuration (Backend) - PHASE 1
# =======================================
# Get from: https://app.supabase.com/project/[project-ref]/settings/api
# EU Region: Choose Frankfurt (eu-central-1) when creating project
SUPABASE_URL=https://xxxxxxxxxxxxxxxxxxxx.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxxxxxxxxx
SUPABASE_JWT_SECRET=your-super-secret-jwt-secret-with-at-least-32-characters
SUPABASE_JWT_AUD=authenticated
SUPABASE_PROJECT_REF=xxxxxxxxxxxxxxxxxxxx
# Database direct connection (for migrations)
DATABASE_URL=postgresql://postgres:[password]@db.xxxxxxxxxxxxxxxxxxxx.supabase.co:5432/postgres

# =======================================
# JWKS Configuration (PHASE 1)
# =======================================
# For JWT verification without round-trips to Supabase
JWKS_URI=https://xxxxxxxxxxxxxxxxxxxx.supabase.co/auth/v1/.well-known/jwks.json
JWKS_CACHE_TIME=600000
# Optional: Override issuer if different from standard
# JWT_ISSUER=https://xxxxxxxxxxxxxxxxxxxx.supabase.co/auth/v1

# =======================================
# CORS Configuration
# =======================================
# Allowed origins for CORS (comma-separated for multiple)
APP_ORIGIN_ADMIN=http://localhost:3001
APP_ORIGIN_ANDROID_DEV=http://localhost:8081
# Production origins (EU regions)
# APP_ORIGIN_ADMIN=https://admin.yourdomain.eu
# APP_ORIGIN_ANDROID_DEV=https://api.yourdomain.eu

# =======================================
# Authentication & Security
# =======================================
# Generate with: openssl rand -base64 32
JWT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
REFRESH_TOKEN_EXPIRES_IN=30d

# =======================================
# Rate Limiting
# =======================================
# Time window for rate limiting in milliseconds (default: 1 minute)
RATE_WINDOW_MS=60000
# Max requests per window for regular endpoints
RATE_MAX_REQUESTS=100
# Max requests per window for chat endpoint (SSE streaming)
RATE_MAX_REQUESTS_CHAT=20

# =======================================
# Monitoring & Observability (Optional)
# =======================================
# Sentry DSN for error tracking (EU region)
# SENTRY_DSN=https://xxxxxxxxxxxxxxxxx@oEU.ingest.sentry.io/xxxxxxxxx
# SENTRY_ENVIRONMENT=development

# =======================================
# Feature Flags (Optional)
# =======================================
# FEATURE_WEBSOCKETS_ENABLED=true
# FEATURE_RATE_LIMITING_ENABLED=true
# FEATURE_ANALYTICS_ENABLED=false